"use strict";let cart=JSON.parse(localStorage.getItem("CART"))||[];const preload=()=>{document.getElementById("preloader").style.display="none"},openCart=()=>{let a=document.querySelector(".cart"),b=document.querySelector(".cart_box"),c=document.querySelector(".navbar-toggler"),d=document.querySelector(".navbar-collapse");a.addEventListener("click",()=>{b.classList.toggle("active"),c.classList.add("collapsed"),c.setAttribute("aria-expanded","false"),d.classList.remove("show")})},render_products=()=>{let a=document.querySelector(".render_products");products.forEach(b=>{a.innerHTML+=`<div class="card my-3"><div class="img_btn"><img src="${b.imgSrc}" class="card-img-top" alt="${b.name}"><button class="btn" onclick="addToCart(${b.id});"><i class="fa fa-plus"></i></button></div><div class="card-body"><div class="title"><div><h5>${b.name}</h5></div><div><h6>$${b.price}</h6></div></div><p>${b.desc}</p></div></div>`})},cartStatus=()=>{let b=document.querySelector(".badge"),a=document.querySelector(".cart_item"),c=document.querySelector(".total_and_order");""==cart?(a.setAttribute("style","display: flex; align-items: center; justify-content: center;"),a.innerHTML=`<p style = "font-size:20px; font-weight: 500; font-family: cursive; text-shadow: 2px 2px 20px #1b1b1b;">you haven't selected any item yet</p>`,c.style.display="none",b.style.display="none"):(a.setAttribute("style",""),c.style.display="block",b.style.display="inline")},addToCart=a=>{if(cart.some(b=>b.id===a))changeNumberOfUnits("plus",a);else{let b=products.find(b=>b.id===a);cart.push({...b,numberOfUnits:1}),update_cart()}},update_cart=()=>{render_cart_item(),render_sub_total(),cartStatus(),localStorage.setItem("CART",JSON.stringify(cart))},render_cart_item=()=>{let a=document.querySelector(".cart_item");a.innerHTML="",cart.forEach(b=>{a.innerHTML+=`<div class="container"><div><h2>${b.name}</h2><h5>$${b.price}</h5><div class="btn_div"><button class="btn btn-sm btn-dark" onclick="changeNumberOfUnits('minus', ${b.id})"><i class="fa fa-minus fa-fw"></i></button><span>${b.numberOfUnits}</span><button class="btn btn-sm btn-dark" onclick="changeNumberOfUnits('plus', ${b.id})"><i class="fa fa-plus fa-fw"></i></button><button class="btn btn-sm btn-danger" onclick="deleteCartItem(${b.id});"><i class="fa fa-trash fa-fw"></i></button></div></div><div><img src="${b.imgSrc}" alt="${b.name}"></div></div><!-- /container -->`})},changeNumberOfUnits=(a,b)=>{cart=cart.map(c=>{let d=c.numberOfUnits;return c.id===b&&("minus"===a&&c.numberOfUnits>1?d--:"plus"===a&&c.numberOfUnits<c.inStock?d++:alert("not more units in our stock")),{...c,numberOfUnits:d}}),update_cart()},render_sub_total=()=>{let c=0,d=0,a,b;a=document.querySelector(".subtotal"),b=document.querySelector(".badge"),cart.forEach(a=>{c+=a.price*a.numberOfUnits,d+=a.numberOfUnits}),a.innerHTML=`<p>${c}</p>`,b.innerHTML=d};update_cart();const deleteCartItem=a=>{cart=cart.filter(b=>b.id!==a),update_cart()};window.onload=()=>{preload(),render_products(),cartStatus(),openCart()}